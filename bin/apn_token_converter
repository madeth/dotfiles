#!/usr/bin/env ruby
# <>\sが取り除かれたtokenを元に戻す
# xxxxxxxxc5ca8f4742e8ad10102d37360c9af4ef9c538c4415f9c43b3115cb75
# -> <xxxxxxxx c5ca8f47 42e8ad10 102d3736 0c9af4ef 9c538c44 15f9c43b 3115cb75>

token = ARGV[0]

if token.nil? || token.length <= 0
  puts <<-EOS
Usage: $ #{File.basename(__FILE__)} [trimmed_token]
EOS
  exit(1)
end

replaced_token = token.scan(/.{1,8}/).join(' ').insert(0, '<') << '>'

puts <<-EOS
token: #{replaced_token}
e.g.) $ apn push '#{replaced_token}' -m 'test notification' -e production -c /path/to/pem
EOS
